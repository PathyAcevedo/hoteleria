<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.w3.org/1999/xhtml">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registrar Usuarios</title>
  <link rel="stylesheet" th:href="@{/css/toast.min.css}" />
  <!-- <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}"> -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />

  <link rel="stylesheet"  th:href="@{/css/style.css}" />

  <style>
    li {
      text-decoration: none;
    }
  </style>
</head>

<body style="background-color: #c1c1c1">
  <div th:insert="~{fragments/header :: header}"></div>

  <div class="container">
    <div class="card" style="background-color: #394062;">
      <div class="card-body">
            <div class="col d-flex justify-content-between border-bottom mb-2" style="outline-color: #ffeba7;">
              <h5 class="card-title" style="color: #ffeba7;">NUEVO EMPLEADO - CREDENCIALES</h5>
            </div>
        <form th:action="@{/users/signup}" th:object="${users}" method="POST">
          <div class="modal-body">
            <input type="hidden" th:field="*{id}" />
            <div class="form-row">
              <div class="form-group col-md-4">

                <div class="input-group-up">
                  <input name="name" autocomplete="off" class="input-up" id="name" type="text" th:field="*{name}" onchange="checkInputs()">
                  <label class="user-label-up">Nombre</label>
                </div>
                <div th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="alert alert-danger mb-3 mt-3">
                </div>

              </div>
              <div class="form-group col-md-4">
                <div class="input-group-up">
                  <input name="lastName" autocomplete="off" class="input-up" id="lastName" type="text" th:field="*{lastName}" onchange="checkInputs()">
                  <label class="user-label-up">Apellido Paterno</label>
                </div>
                <div th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}"
                  class="alert alert-danger mb-3 mt-3"></div>
              </div>

              <div class="form-group col-md-4">
                <div class="input-group-up">
                  <input name="surname" autocomplete="off" class="input-up" id="surname" type="text" th:field="*{surname}" onchange="checkInputs()">
                  <label class="user-label-up">Apellido Materno</label>
                </div>

                <div th:if="${#fields.hasErrors('surname')}" th:errors="*{surname}"
                     class="alert alert-danger mb-3 mt-3"></div>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-4">

                <div class="input-group-up">
                  <input name="mail" autocomplete="off" class="input-up" id="mail" type="email" th:field="*{email}" onchange="checkInputs()">
                  <label class="user-label-up">Correo</label>
                </div>

                <div th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="alert alert-danger mb-3 mt-3">
                </div>
              </div>
              <div class="form-group col-md-4">

                <div class="input-group-up">
                  <input name="username" autocomplete="off" class="input-up" id="username" type="text" th:field="*{username}" onchange="checkInputs()">
                  <label class="user-label-up">Usuario</label>
                </div>
                <div th:if="${#fields.hasErrors('username')}" th:errors="*{username}"
                  class="alert alert-danger mb-3 mt-3"></div>
              </div>
              <div class="form-group col-md-4">

                <div class="input-group-up">
                  <input name="phone" autocomplete="off" class="input-up" id="phone" type="tel" th:field="*{phone}" onchange="checkInputs()">
                  <label class="user-label-up">Teléfono</label>
                </div>
                <div th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}" class="alert alert-danger mb-3 mt-3">
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-4">
                <div class="input-group-up">
                  <input name="pass1" autocomplete="off" class="input-up" id="pass1" type="password" th:field="*{password}" onchange="checkInputs()">
                  <label class="user-label-up">Contraseña</label>
                </div>

                <div th:if="${#fields.hasErrors('password')}" th:errors="*{password}"
                  class="alert alert-danger mb-3 mt-3"></div>
              </div>
              <div class="form-group col-md-4">
                <div class="input-group-up">
                  <input name="pass2" autocomplete="off" class="input-up" id="pass2" type="password" th:field="*{password}" onchange="checkInputs()">
                  <label class="user-label-up">Confirmar Contraseña</label>
                </div>
                <div th:if="${#fields.hasErrors('password')}" th:errors="*{password}"
                  class="alert alert-danger mb-3 mt-3"></div>
              </div>


            </div>

                <a th:href="@{/users/list}" class="button-cancel float-left" data-bs-dismiss="modal">
                  <ion-icon name="arrow-back-outline"></ion-icon>Cancelar </a>

                <button id="btnReg" onclick="checkInputs()" class="button-save float-right" type="submit" disabled>
                  <ion-icon name="checkmark"></ion-icon>&nbsp;Guardar
                </button>

          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- <script th:src="@{/js/bootstrap.min.js}"></script> -->
  <!--Ionicons-->
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

  <script th:src="@{/js/toast.min.js}"></script>

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>

  <script th:if="${msg_success != null}">
    new Toast({
      message: "[[${msg_success}]]",
      type: "success",
    });
  </script>
  <script th:if="${msg_error != null}">
    new Toast({
      message: "[[${msg_error}]]",
      type: "danger",
    });
  </script>
  <script>
    checkInputs = () => {
      var pass1 = $("#pass1").val();
      var pass2 = $("#pass2").val();
      var btn = $("#btnReg");
      var name = $("#name").val();
      var lastname = $("#lastname").val();
      var phone = $("#phone").val();
      var mail = $("#mail").val();
      var username = $("#username").val();

      if (name != "" && lastname != "" && phone != "" && mail != "" && pass1 != "" && pass2 != "" && username != "") {
        if (pass1 !== pass2) {
          btn.attr('disabled', true);
          event.preventDefault();
        } else {
          btn.attr('disabled', false);
        }
      }
    }
  </script>
</body>

</html>